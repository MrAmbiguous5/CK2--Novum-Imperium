namespace = mta
#mta_vv_events.txt
#mta.1 Invite lowborn
#mta.130 Jailor poisoned
#mta.131 Prisoner poisoned
#mta.140 Jailor visiting prisoner in dungeon
#mta.141 Prisoner being visited
#mta.142 Slaver
#mta.143 Renowned slaver
#mta.150 Purchase Slave
#mta.151 Purchase Slave - Male
#mta.152 Purchase Slave - Male - Castration Choice
#mta.153 Purchase Slave - Female
#mta.154 Purchase Slave - Special Request
#mta.156 Sent Slave
#mta.157 Rejected Sent Slave
#mta.158 Accepted Sent Slave
#mta.159 Claimed slave dummy notification to change FROM
#mta.160 Claimed slave notification
#mta.167 Slave drops dinner plate ping
#mta.168 Slave drops dinner plate
#mta.169 Slave steals alcohol ping
#mta.170 Slave steals alcohol
#mta.171 Slaves bickering ping
#mta.172 Slaves bickering
#mta.191 AI Purchase Slave: Martial
#mta.192 AI Purchase Slave: Martial Gladiator
#mta.193 AI Purchase Slave: Stewardship
#mta.194 AI Purchase Slave: Learning Doctor

#mta_vv_on_action_events.txt
#mta.161 on_startup: Set global flag for compatibility with other mods
#mta.162 on_yearly_pulse: Slave maintenance event
#mta.163 on_employer_change: Slave employer change event
#mta.164 on_birth: Born into slavery

# Raised Lowborn
character_event = {
	id = "mta.1"
	desc = "mta.1.desc"
	picture = "GFX_evt_emissary"
	
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = "mta.1.a"

		event_target:mta_settlement_from = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_character = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
			}
			new_character = {
				hidden_tooltip = {
					if = {
						limit = {
							religion_group = indian_group
						}
						add_trait = vaishya
						character_event = { id = RoI.30121 }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
					opinion = { modifier = opinion_eager_lowborn who = ROOT years = 50 } 
					opinion = { modifier = opinion_eager_lowborn_temp who = ROOT years = 10 } 
					add_character_modifier = { name = raised_lowborn_modifier duration = -1 hidden = no } 
				}
				save_event_target_as = invited_character
			}
			character_event = { id = NE.1 }
		}
	}
	
	option = {
		name = "mta.1.b"
		
		event_target:mta_settlement_from = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_character = {
				random_traits = yes
				dynasty = none
				female = yes
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
			}
			new_character = {
				hidden_tooltip = {
					if = {
						limit = {
							religion_group = indian_group
						}
						add_trait = vaishya
						character_event = { id = RoI.30121 }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
					opinion = { modifier = opinion_eager_lowborn who = ROOT years = 50 } 
					opinion = { modifier = opinion_eager_lowborn_temp who = ROOT years = 10 } 
					add_character_modifier = { name = raised_lowborn_modifier duration = -1 hidden = no } 
				}
				save_event_target_as = invited_character
			}
			character_event = { id = NE.1 }
		}
	}
	
	option = {
		tooltip_info = lunatic
		name = "mta.1.c"
		trigger = {
			trait = lunatic
		}
		event_target:mta_settlement_from = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_character = {
				age = 16
				female = 50
				religion = event_target:mta_settlement_root
				culture = cat
				race = cat
				dynasty = none
				trait = cat
				trait = imbecile
				trait = deceitful
				trait = fair
				trait = wroth
				trait = proud
			}
			new_character = {
				hidden_tooltip = {
					opinion = {
						modifier = opinion_my_servant
						who = ROOT
						years = 100
					}
					reverse_opinion = {
						modifier = opinion_my_kitten
						who = ROOT
						years = 100
					}
				}
				save_event_target_as = invited_character
			}
			character_event = { id = NE.1 }
		}
	}
		
	option = {
		name = "mta.1.d"
		
		hidden_tooltip = {
			event_target:mta_settlement_from = {
				remove_character_modifier = mta_employ_lowborn_timer
			}
		}
	}
}

# Jailor poisoned
character_event = {
	id = mta.130
	desc = EVTDESCAc.130
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_into_the_dungeon
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.130
	}
}

# Prisoner poisoned
character_event = {
	id = mta.131
	desc = EVTDESCAc.131
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_into_the_dungeon
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.131
	}
}

# Slaver visiting slave in chambers
character_event = {
	id = mta.138
	desc = mta.138.desc
	border = GFX_event_normal_frame_intrigue
	picture = { 
		trigger = { FROM = { is_female = yes } } 
		picture = GFX_evt_bad_news_female
	}
	picture = { 
		trigger = { FROM = { is_female = no } } 
		picture = GFX_evt_bad_news
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.140
		tooltip = {
			from = {
				mta_rape_effect = yes
			}
		}
	}
}

# Slave being visited in chambers
character_event = {
	id = mta.139
	desc = mta.139.desc
	border = GFX_event_normal_frame_intrigue
	picture = { 
		trigger = { is_female = yes } 
		picture = GFX_evt_bad_news_female
	}
	picture = { 
		trigger = { is_female = no } 
		picture = GFX_evt_bad_news
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.141
		mta_rape_effect = yes
	}
}

# Jailor visiting prisoner in dungeon
character_event = {
	id = mta.140
	desc = EVTDESCAc.140
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_into_the_dungeon
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.140
		tooltip = {
			from = {
				mta_rape_effect = yes
			}
		}
	}
}

# Prisoner being visited in dungeon
character_event = {
	id = mta.141
	desc = EVTDESCAc.141
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_into_the_dungeon
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAAc.141
		mta_rape_effect = yes
	}
}

# Slaver
character_event = {
	id = mta.142
	desc = "mta.142.desc"
	picture = "GFX_evt_market"
	
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = "mta.142.a"
		
		add_character_modifier = { name = mta_slaver_modifier duration = -1 }
	}
}

# Renowned slaver
character_event = {
	id = mta.143
	desc = "mta.143.desc"
	picture = "GFX_evt_market"
	
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = "mta.143.a"
		
		add_character_modifier = { name = mta_renowned_slaver_modifier duration = -1 }
		
		hidden_tooltip = {
			remove_character_modifier = mta_slaver_modifier
		}
	}
}

# DEBUG: Count total number of slaves
character_event = {
	id = mta.149
	
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		any_character = {
			limit = {
				trait = slave
			}
			change_variable = { which = global_slave_count value = 1 }
		}
		log = "MTA EVENTS: Total slave count: [global_slave_count.GetValue]"
		set_variable = { which = global_slave_count value = 0 }
	}
}

# Purchase Slave
character_event = {
	id = "mta.150"
	desc = "mta.150.desc"
	picture = GFX_evt_market
	border = GFX_event_normal_frame_economy
	
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = "mta.150.a"

		custom_tooltip = { text = mta.150.expertise_choice_TT }
		event_target:slaver = {
			character_event = { id = mta.151 }
		}
	}
	
	option = {
		name = "mta.150.b"
		
		custom_tooltip = { text = mta.150.expertise_choice_TT }
		event_target:slaver = {
			character_event = { id = mta.153 }
		}
	}
	
	option = {
		name = "mta.150.c"
		
		custom_tooltip = { text = mta.154.special_request_TT }
		event_target:slaver = {
			character_event = { id = mta.154 }
		}
	}
		
	option = {
		name = "mta.150.d"
		
		custom_tooltip = { text = mta.150.cancel_TT }
		hidden_tooltip = {
			event_target:slaver = {
				remove_character_modifier = mta_employ_slave_timer
			}
		}
	}
}

# Purchase Slave - Male
character_event = {
	id = "mta.151"
	desc = "mta.151.desc"
	picture = GFX_evt_market
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = { # Martial
		name = "mta.151.a"

		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 2
					martial = 5
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					new_slave_effect = yes
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_martial = 1 }
						10 = { change_martial = 2 }
						5  = { change_martial = 3 }
						3  = { change_martial = 4 }
						2  = { change_martial = 5 }
					}
					random_list = {
						50 = { }
						16 = { add_trait = duelist }
						12 = { add_trait = hunter }
						12 = { add_trait = strategist }
						5  = { add_trait = tall }
						5  = { add_trait = imposing }
						2  = {
							add_trait = tall
							add_trait = imposing
						}
					}
					random_list = {
						95 = { }
						5  = { add_trait = robust }
					}
					if = { 
						limit = {
							NOT = { has_any_leadership_trait_trigger = yes }
							trait = brilliant_strategist
						}
						add_random_commander_trait_effect = yes
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				} 
				save_event_target_as = invited_character
			}
			purchase_slave_effect = yes
		}
	}
	
	option = { # Stewardship
		name = "mta.151.b"
		
		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_steward = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 2
					martial = 2
					stewardship = 5
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					new_slave_effect = yes
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_stewardship = 1 }
						10 = { change_stewardship = 2 }
						5  = { change_stewardship = 3 }
						3  = { change_stewardship = 4 }
						2  = { change_stewardship = 5 }
					}
					random_list = {
						55 = { }
						15 = { add_trait = gardener }
						15 = { add_trait = architect }
						15 = { add_trait = administrator }
					}
					random_list = {
						95 = { }
						5  = { add_trait = robust }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			purchase_slave_effect = yes
		}
	}
	
	option = { # Diplomacy
		name = "mta.151.c"
		
		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_diplomat  = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 5
					martial = 2
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					new_slave_effect = yes
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_diplomacy = 1 }
						10 = { change_diplomacy = 2 }
						5  = { change_diplomacy = 3 }
						3  = { change_diplomacy = 4 }
						2  = { change_diplomacy = 5 }
					}
					random_list = {
						50 = { }
						15 = { add_trait = socializer }
						15 = { add_trait = gamer }
						15 = {
							add_trait = gregarious
							add_trait = fair
						}
						5  = { add_trait = shrewd }
					}
					random_list = {
						95 = { }
						5  = { add_trait = robust }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			purchase_slave_effect = yes
		}
	}
		
	option = {
		name = "mta.151.d"
		
		custom_tooltip = { text = mta.150.start_over_TT }
		hidden_tooltip = { character_event = { id = mta.150 } }
	}
}

# Purchase Slave - Male - Castration Choice
character_event = {
	id = "mta.152"
	desc = {
		trigger = {
			NOT = { has_religion_feature = religion_matriarchal }
		}
		text = "mta.152.desc"
	}
	desc = {
		trigger = {
			has_religion_feature = religion_matriarchal
		}
		text = "mta.152.desc_matriarchal"
	}
	picture = GFX_evt_humiliation_prisoner
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = "mta.152.b"
		
		hidden_tooltip = {
			character_event = { id = NE.1 }
		}
	}
	
	option = {
		name = "mta.152.a"

		event_target:invited_character = {
			show_scope_change = no
			add_trait = eunuch
		}
		hidden_tooltip = {
			character_event = { id = NE.1 }
		}
	}
}

# Purchase Slave - Female
character_event = {
	id = "mta.153"
	desc = "mta.153.desc"
	picture = GFX_evt_market
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = { # Intrigue
		name = "mta.153.a"

		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_intriguer = {
				random_traits = yes
				dynasty = none
				female = yes
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 2
					martial = 2
					stewardship = 2
					intrigue = 5
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_intrigue = 1 }
						10 = { change_intrigue = 2 }
						5  = { change_intrigue = 3 }
						3  = { change_intrigue = 4 }
						2  = { change_intrigue = 5 }
					}
					random_list = {
						50 = { }
						15 = { add_trait = schemer }
						15 = { add_trait = impaler }
						15 = { add_trait = seductress }
						5  = { add_trait = shrewd }
					}
					random_list = {
						95 = { }
						5  = { add_trait = fair }
					}
					random_list = {
						97 = { }
						3  = { 
							add_trait = disfigured
							add_trait = deceitful
							add_trait = envious
						}
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
					mta_give_intriguer_nickname_effect = yes
				}
				save_event_target_as = invited_character
			}
			hidden_tooltip = {
				character_event = { id = NE.1 }
			}
		}
	}
	
	option = { # Stewardship
		name = "mta.153.b"
		
		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_steward = {
				random_traits = yes
				dynasty = none
				female = yes
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 2
					martial = 2
					stewardship = 5
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_stewardship = 1 }
						10 = { change_stewardship = 2 }
						5  = { change_stewardship = 3 }
						3  = { change_stewardship = 4 }
						2  = { change_stewardship = 5 }
					}
					random_list = {
						55 = { }
						15 = { add_trait = gardener }
						15 = { add_trait = architect }
						15 = { add_trait = administrator }
					}
					random_list = {
						95 = { }
						5  = { add_trait = fair }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			hidden_tooltip = {
				character_event = { id = NE.1 }
			}
		}
	}
	
	option = { # Diplomacy
		name = "mta.153.c"
		
		event_target:slaver = {
			scaled_wealth = { value = -0.10 min = -10 max = -100 }
			prestige = -25
			create_random_diplomat  = {
				random_traits = yes
				dynasty = none
				female = yes
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 5
					martial = 2
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_lifestyle_trait_effect = yes
					random_list = {
						20 = { }
						15 = { change_diplomacy = 1 }
						10 = { change_diplomacy = 2 }
						5  = { change_diplomacy = 3 }
						3  = { change_diplomacy = 4 }
						2  = { change_diplomacy = 5 }
					}
					random_list = {
						50 = { }
						15 = { add_trait = socializer }
						15 = { add_trait = gamer }
						15 = {
							add_trait = gregarious
							add_trait = fair
						}
						5  = { add_trait = shrewd }
					}
					random_list = {
						95 = { }
						5  = { add_trait = fair }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			hidden_tooltip = {
				character_event = { id = NE.1 }
			}
		}
	}
		
	option = {
		name = "mta.153.d"
		
		custom_tooltip = { text = mta.150.start_over_TT }
		hidden_tooltip = { character_event = { id = mta.150 } }
	}
}

# Purchase Slave - Special Request
character_event = {
	id = "mta.154"
	desc = {
		trigger = {
			NOT = { has_religion_feature = religion_matriarchal }
		}
		text = "mta.154.desc"
	}
	desc = {
		trigger = {
			has_religion_feature = religion_matriarchal
		}
		text = "mta.154.desc_matriarchal"
	}
	picture = GFX_evt_market
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { 
				event_target:mta_settlement_root = { 
					OR = {
						religion_scope = { has_religion_feature = religion_equal }
						religion_scope = { has_religion_feature = religion_matriarchal }
					}
				}
			}
			random_list = {
				50 = { set_variable = { which = slave_gender value = 0 } } # Male
				50 = { set_variable = { which = slave_gender value = 1 } } # Female
			}
		}
		else = {
			random_list = {
				85 = { set_variable = { which = slave_gender value = 0 } } # Male
				15 = { set_variable = { which = slave_gender value = 1 } } # Female
			}
		}
	}
	
	option = { # Gladiator
		name = "mta.154.a"

		event_target:slaver = {
			scaled_wealth = { value = -0.40 min = -30 max = -250 }
			prestige = -25
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 2
					martial = 5
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					new_slave_effect = yes
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = craven
					remove_education_effect = yes
					random_list = {
						50 = { add_trait = skilled_tactician }
						30 = { add_trait = tough_soldier }
						20 = { add_trait = brilliant_strategist }
					}
					remove_lifestyle_trait_effect = yes
					add_trait = duelist
					random_list = {
						15 = { }
						16 = { change_martial = 1 }
						11 = { change_martial = 2 }
						6  = { change_martial = 3 }
						4  = { change_martial = 4 }
						3  = { change_martial = 5 }
					}
					# Set some interesting traits
					random = {
						chance = 15
						add_trait = uncouth
					}
					random = {
						chance = 5
						add_trait = dull
					}
					random = {
						chance = 5
						add_trait = wroth
					}
					random = {
						chance = 5
						add_trait = envious
					}
					random = {
						chance = 5
						add_trait = stubborn
					}
					random = {
						chance = 5
						add_trait = proud
					}
					random = {
						chance = 5
						add_trait = lefthanded
					}
					random = {
						chance = 5
						add_trait = one_eyed
					}
					random_list = {
						44 = {
							change_variable = { which = scarred_variable value = 1 }
							add_scarred_tiered_effect = yes
						}
						33 = {
							change_variable = { which = scarred_variable value = 5 }
							add_scarred_tiered_effect = yes
						}
						23 = {
							change_variable = { which = scarred_variable value = 10 }
							add_scarred_tiered_effect = yes
						}
					}
					random_list = {
						78 = { }
						5 =  { add_trait = sturdy }
						5  = { add_trait = strong }
						5  = { add_trait = tall }
						5  = { add_trait = imposing }
						2  = {
							add_trait = tall
							add_trait = imposing
						}
					}
					random_list = {
						92 = { }
						8  = { add_trait = robust }
					}
					random_list = {
						98 = { }
						2  = { add_trait = giant }
					}
					if = { 
						limit = {
							NOT = { has_any_leadership_trait_trigger = yes }
							trait = brilliant_strategist
						}
						add_random_commander_trait_effect = yes
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
					mta_give_warrior_nickname_effect = yes
				}		
				save_event_target_as = invited_character
			}
			custom_tooltip = { text = mta.151.a_choice_TT }
			purchase_slave_effect = yes
		}
	}
	
	option = { # Physician
		name = "mta.154.b"
		
		trigger = {
			has_dlc = "Reapers"
			NOR = {
				is_tribal = yes
				is_nomadic = yes
			}
			OR = {
				mercenary = no
				ai = no
			}
			OR = {
				higher_tier_than = COUNT
				ai = no
				is_ill = yes
				num_of_symptoms > 0
			}
			#OR = {
			#	NOT = { has_character_flag = 3_year_physician_cooldown }
			#	had_character_flag = { flag = 3_year_physician_cooldown days = 1095 }
			#}
		}

		event_target:slaver = {
			scaled_wealth = { value = -0.40 min = -30 max = -250 }
			prestige = -25
			#hidden_tooltip = {
			#	clr_character_flag = 3_year_physician_cooldown
			#	set_character_flag = 3_year_physician_cooldown
			#}
			if = {
				limit = { check_variable = { which = slave_gender value == 1 } }
				create_random_priest = {
					random_traits = yes
					dynasty = none
					female = yes
					culture = event_target:mta_settlement_root
					religion = event_target:mta_settlement_root
					age = 35
					attributes = {
						diplomacy = 2
						martial = 2
						stewardship = 2
						intrigue = 2
						learning = 8
					}
					health = 6
					flag = is_court_physician
				}
			}
			else = {
				create_random_priest = {
					random_traits = yes
					dynasty = none
					female = no
					culture = event_target:mta_settlement_root
					religion = event_target:mta_settlement_root
					age = 35
					attributes = {
						diplomacy = 2
						martial = 2
						stewardship = 2
						intrigue = 2
						learning = 8
					}
					health = 6
					flag = is_court_physician
				}
			}
			new_character = {
				hidden_tooltip = {
					new_slave_effect = yes
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_education_effect = yes
					random_list = {
						50 = { add_trait = scholarly_theologian }
						30 = { add_trait = martial_cleric }
						20 = { add_trait = mastermind_theologian }
					}
					remove_lifestyle_trait_effect = yes
					add_trait = physician
					random_list = {
						20 = { }
						15 = { change_learning = 1 }
						10 = { change_learning = 2 }
						5  = { change_learning = 3 }
						3  = { change_learning = 4 }
						2  = { change_learning = 5 }
					}
					random_list = {
						70 = { }
						15 = { add_trait = mystic }
						15 = { add_trait = scholar }
					}
					random_list = {
						92 = { }
						8  = { add_trait = shrewd }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				if = {
					limit = { 
						event_target:slaver = { NOT = { has_assigned_minor_title = title_court_physician } }
					}
					give_minor_title = title_court_physician
				}
				save_event_target_as = invited_character
			}
			if = {
				limit = { check_variable = { which = slave_gender value == 1 } }
				custom_tooltip = { text = mta.151.b_enatic_choice_TT }
			}
			else = {
				custom_tooltip = { text = mta.151.b_choice_TT }
			}
			purchase_slave_effect = yes
		}
	}
	
	option = {
		name = "mta.154.c" # Beautiful woman
		trigger = { 
			NOR = { 
				has_religion_feature = religion_matriarchal 
				AND = {
					event_target:mta_settlement_root = { religion_scope = { has_religion_feature = religion_equal } }
					event_target:slaver = { check_variable = { which = slave_gender value == 0 } }
				}
			} 
		}
	
		event_target:slaver = {
			scaled_wealth = { value = -0.40 min = -30 max = -250 }
			prestige = -25
			create_random_diplomat = {
				random_traits = yes
				dynasty = none
				female = yes
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 5
					martial = 2
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = ugly
					remove_trait = uncouth
					remove_education_effect = yes
					random_list = {
						50 = { add_trait = charismatic_negotiator }
						30 = { add_trait = underhanded_rogue }
						20 = { add_trait = grey_eminence }
					}
					remove_lifestyle_trait_effect = yes
					# Set some interesting traits
					add_trait = groomed
					random_list = {
						15 = { }
						16 = { change_diplomacy = 1 }
						11 = { change_diplomacy = 2 }
						6  = { change_diplomacy = 3 }
						4  = { change_diplomacy = 4 }
						3  = { change_diplomacy = 5 }
					}
					random_list = {
						50 = { }
						20 = { add_trait = socializer }
						20 = {
							add_trait = gregarious
							add_trait = fair
						}
						5 = { add_trait = gamer }
						5  = { add_trait = shrewd }
					}
					random_list = {
						95 = { }
						5  = { add_trait = fair }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			custom_tooltip = { text = mta.151.c_choice_TT }
			hidden_tooltip = {
				character_event = { id = NE.1 }
			}
		}
	}
	
	option = {
		name = "mta.154.c_enatic" # Handsome man
		trigger = { 
			OR = {
				has_religion_feature = religion_matriarchal 
				AND = {
					event_target:mta_settlement_root = { religion_scope = { has_religion_feature = religion_equal } }
					event_target:slaver = { check_variable = { which = slave_gender value == 0 } }
				}
			}
		}
		#tooltip_info_custom = mta_REASON_DOCTRINE_ENATIC_CLANS
	
		event_target:slaver = {
			scaled_wealth = { value = -0.40 min = -30 max = -250 }
			prestige = -25
			create_random_diplomat = {
				random_traits = yes
				dynasty = none
				female = no
				culture = event_target:mta_settlement_root
				religion = event_target:mta_settlement_root
				attributes = {
					diplomacy = 5
					martial = 2
					stewardship = 2
					intrigue = 2
					learning = 2
				}
			}
			new_character = {
				hidden_tooltip = {
					enslave_effect = yes
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = ugly
					remove_trait = uncouth
					remove_education_effect = yes
					random_list = {
						50 = { add_trait = charismatic_negotiator }
						30 = { add_trait = underhanded_rogue }
						20 = { add_trait = grey_eminence }
					}
					remove_lifestyle_trait_effect = yes
					# Set some interesting traits
					add_trait = groomed
					random_list = {
						15 = { }
						16 = { change_diplomacy = 1 }
						11 = { change_diplomacy = 2 }
						6  = { change_diplomacy = 3 }
						4  = { change_diplomacy = 4 }
						3  = { change_diplomacy = 5 }
					}
					random_list = {
						50 = { }
						20 = { add_trait = socializer }
						20 = {
							add_trait = gregarious
							add_trait = fair
						}
						5 = { add_trait = gamer }
						5  = { add_trait = shrewd }
					}
					random_list = {
						95 = { }
						5  = { add_trait = fair }
					}
					if = {
						limit = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
								has_religion_feature = religion_astrology
							}
						}
						hidden_tooltip = { add_western_zodiac_trait_effect = yes }
					}
					if = {
						limit = {
							has_religion_feature = religion_no_leader
							religion_group = pagan_group
						}
						random_list = {  
							5 = {
								add_trait = pagan_branch_1
							}
							25 = {
								add_trait = pagan_branch_2
							}
							25 = {
								add_trait = pagan_branch_3
							}
							25 = {
								add_trait = pagan_branch_4
							}
						}
					}
				}
				save_event_target_as = invited_character
			}
			custom_tooltip = { text = mta.151.c_enatic_choice_TT }
			purchase_slave_effect = yes
		}
	}
	
	option = {
		name = "mta.154.z"
		
		custom_tooltip = { text = mta.150.start_over_TT }
		hidden_tooltip = { character_event = { id = mta.150 } }
	}

	after = {
		hidden_tooltip = { set_variable = { which = slave_gender value = 0 } }
	}
}

# Sent Slave
letter_event = {
	id = mta.156
	desc = "mta.156.desc"
	border = GFX_event_letter_frame_economy

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		show_portrait = event_target:slave_sent
		event_target:slave_sent = {
			show_scope_change = no
			if = { 
				limit = { NOT = { has_opinion_modifier = { who = event_target:slave_received modifier = opinion_my_owner } } }
				opinion = { modifier = opinion_my_owner who = event_target:slave_received }
			}
			hidden_tooltip = {
				remove_opinion = { who = event_target:slave_sender modifier = opinion_my_owner }
			}
		}
		opinion = { modifier = opinion_received_slave who = event_target:slave_sender months = 12 }
		event_target:slave_sender = {
			show_scope_change = no
			hidden_tooltip = {
				letter_event = { id = mta.158 days = 3 random = 11 }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				slavery_enabled = no
			}			
		}
	}
	
	option = {
		name = mta.156.b
		show_portrait = event_target:slave_sent
		tooltip = {
			event_target:slave_sent = {
				show_scope_change = no
				move_character = event_target:slave_sender
			}
		}
		event_target:slave_sender = {
			show_scope_change = no
			opinion = { modifier = opinion_ungrateful who = event_target:slave_received months = 12 }
			hidden_tooltip = {
				letter_event = { id = mta.157 days = 3 random = 11 }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				slavery_enabled = yes
			}			
		}
	}
}

# Rejected Sent Slave
letter_event = {
	id = mta.157
	desc = "mta.157.desc"
	border = GFX_event_letter_frame_economy

	is_triggered_only = yes
	
	immediate = {
		event_target:slave_sent = {
			move_character = event_target:slave_sender
			if = { 
				limit = { has_opinion_modifier = { who = event_target:slave_received modifier = opinion_my_owner } }
				remove_opinion = { who = event_target:slave_received modifier = opinion_my_owner }
			}
		}
	}

	option = {
		name = mta.157.a
		show_portrait = event_target:slave_sent
		ai_chance = {
			factor = 1						
		}
	}
}

# Accepted Sent Slave
letter_event = {
	id = mta.158
	desc = "mta.158.desc"
	border = GFX_event_letter_frame_economy

	is_triggered_only = yes

	option = {
		name = mta.158.a
		show_portrait = event_target:slave_sent
		ai_chance = {
			factor = 1						
		}
	}
}

# Claimed slave dummy notification to change FROM
character_event = {
	id = mta.159
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:slaver = {
			character_event = { id = mta.160 }
		}
	}
}

# Claimed slave notification
character_event = {
	id = mta.160
	desc = mta.160.desc		
	picture = GFX_evt_into_the_dungeon
	
	is_triggered_only = yes
	notification = yes
	
	option = { 
		name = OK 
	}
}

# Slave drops dinner plate ping
character_event = {
	id = mta.167
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 12
	has_character_flag = slave
	capable_only = yes
	prisoner = no
	
	trigger = {
		trait = slave
		NOR = {
			is_landed = yes
			is_councillor = yes
		}
		liege = { 
			slavery_enabled = yes 
			is_playable = yes
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 0.8
			liege = { trait = temperate }
		}
		modifier = {
			factor = 1.2
			liege = {
				OR = {
					trait = gluttonous
					AND = {
						trait = is_fat
						NOT = { has_character_modifier = hard_diet }
					}
				}
			}
		}
		modifier = {
			factor = 1.8
			trait = inbred
		}
		modifier = {
			factor = 1.8
			trait = hunchback
		}
		modifier = {
			factor = 1.8
			trait = clubfooted
		}
		modifier = {
			factor = 0.4
			trait = diligent
		}
		modifier = {
			factor = 1.2
			trait = slothful
		}
		modifier = {
			factor = 0.4
			trait = patient
		}
		modifier = {
			factor = 1.2
			trait = wroth
		}
		modifier = {
			factor = 1.2
			trait = stressed
		}
	}
	
	immediate = {
		random_host_courtier = {
			limit = {
				trait = slave
				NOT = { character = ROOT }
				is_landed = no
				in_command = no
				prisoner = no
			}
			save_event_target_as = slave_dinner_helper
		}
		liege = { character_event = { id = mta.168 days = 7 random = 7 } }
	}
}

# Slave drops dinner plate
character_event = {
	id = mta.168
	desc = "mta.168.desc"
	
	picture = { 
		trigger = { 
			liege = { religion_group = pagan_group }
		}
		picture = GFX_evt_feast_hf
	}
	picture = {
		trigger = { 
			liege = { NOT = { religion_group = pagan_group } }
		}
		picture = GFX_evt_fancy_feast
	}
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			trait = slave
			NOR = {
				is_landed = yes
				is_councillor = yes
				in_command = yes
			}
		}
		slavery_enabled = yes 
		in_command = no
	}
	
	fail_trigger_effect = { #If something temporary stopped this, let's try the ping event one more time
		if = {
			limit = {
				NOT = { has_character_flag = refiring_event }
				FROM = {
					trait = slave
					NOR = {
						is_landed = yes
						is_councillor = yes
					}
				}
				OR = {
					FROM = { in_command = yes }
					ROOT = { in_command = yes }
				}
			}
			set_character_flag = refiring_event
			character_event = { id = mta.167 days = 14 random = 14 }
		}
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
		}
	}
	
	immediate = {
		log = "MTA EVENTS: Slave [From.GetFirstName] dropped a dinner plate in the court of [Root.GetBestName]" 
	}
	
	option = {
		name = "mta.168.a"
		trigger = { trait = wroth }
		tooltip_info = wroth
		custom_tooltip = { text = mta.168.clean_mess_wroth_TT }
		FROM = { opinion = { modifier = opinion_afraid who = ROOT years = 5 } }
		random_list = {
			25 = {
				trigger = { FROM = { trait = trusting } }
				if = { limit = { FROM = { trait = trusting } }
					FROM = {
						remove_trait = trusting
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38306 } #I am no longer Trusting
						}
					}
				}
			}
			25 = {
				trigger = { 
					FROM = { 
						NOT = { trait = trusting } 
						NOT = { trait = paranoid }
					} 
				}
				if = { limit = { FROM = { NOT = { trait = trusting } NOT = { trait = paranoid } } }
					FROM = {
						add_trait = paranoid
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38275 } #I have become paranoid
						}
					}
				}
			}
			25 = {
				trigger = { FROM = { NOT = { trait = stressed } } }
				if = { limit = { FROM = { NOT = { trait = stressed } } }
					FROM = {
						add_trait = stressed
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38282 } #I have become stressed
						}
					}
				}
			}
			75 = { }
		}
		hidden_tooltip = { opinion = { modifier = opinion_furious who = FROM years = 5 } }
		ai_chance = {
			factor = 40
		}
	}
	
	option = {
		name = "mta.168.b"
		trigger = { trait = patient }
		tooltip_info = patient
		custom_tooltip = { text = mta.168.clean_mess_patience_TT }
		FROM = { opinion = { modifier = opinion_relieved who = ROOT years = 5 } }
		hidden_tooltip = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "mta.168.b"
		trigger = { 
			trait = humble 
			NOT = { trait = patient }
		}
		tooltip_info = humble
		custom_tooltip = { text = mta.168.clean_mess_patience_TT }
		FROM = { opinion = { modifier = opinion_relieved who = ROOT years = 5 } }
		hidden_tooltip = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "mta.168.c"
		custom_tooltip = { text = mta.168.clean_mess_TT }
		FROM = { opinion = { modifier = opinion_worried who = ROOT years = 5 } }
		random_list = {
			25 = {
				trigger = { FROM = { trait = trusting } }
				if = { limit = { FROM = { trait = trusting } }
					FROM = {
						remove_trait = trusting
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38306 } #I am no longer Trusting
						}
					}
				}
			}
			25 = {
				trigger = { 
					FROM = { 
						NOT = { trait = trusting } 
						NOT = { trait = paranoid }
					} 
				}
				if = { limit = { FROM = { NOT = { trait = trusting } NOT = { trait = paranoid } } }
					FROM = {
						add_trait = paranoid
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38275 } #I have become paranoid
						}
					}
				}
			}
			25 = {
				trigger = { FROM = { NOT = { trait = stressed } } }
				if = { limit = { FROM = { NOT = { trait = stressed } } }
					FROM = {
						add_trait = stressed
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38282 } #I have become stressed
						}
					}
				}
			}
			75 = { }
		}
		hidden_tooltip = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "mta.168.d"
		trigger = {
			any_courtier = {
				count = 2
				trait = slave
			}
			event_target:slave_dinner_helper = {
				is_landed = no
				in_command = no
				prisoner = no
			}
		}
		custom_tooltip = { text = mta.168.clean_mess_together_TT }
		FROM = { opinion = { modifier = opinion_relieved who = ROOT years = 5 } }
		event_target:slave_dinner_helper = {
			opinion = { modifier = opinion_annoyed who = FROM years = 5 } 
		}
		random_list = {
			 25 = {
				trigger = { FROM = { trait = paranoid } }
				if = { limit = { FROM = { trait = paranoid } }
					FROM = {
						remove_trait = paranoid
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38305 } #I am no longer Paranoid
						}
					}
				}
			}
			25 = {
				trigger = {
					FROM = { 
						NOT = { trait = trusting } 
						NOT = { trait = paranoid }
					} 
				}
				if = { limit = { FROM = { NOT = { trait = trusting } NOT = { trait = paranoid } } }
					FROM = {
						add_trait = trusting
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38250 } #I have become trusting
						}
					}
				}
			}
			75 = { }
		}
		if = { 
			limit = { NOT = { trait = kind } }
			random = {
				chance = 25
				add_trait = kind
				hidden_tooltip = { 
					character_event = { id = 38268 } #I have become kind
				}
			}
		}
		hidden_tooltip = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.1
				NOT = { opinion = { who = FROM value = 10 } }
			}
		}
	}
	
	option = {
		name = "mta.168.e"
		trigger = { trait = cruel }
		tooltip_info = cruel
		custom_tooltip = { text = mta.168.clean_mess_afraid_TT }
		FROM = { imprison = ROOT }
		FROM = { opinion = { modifier = opinion_afraid who = ROOT years = 5 } }
		random_list = {
			 25 = {
				trigger = { FROM = { NOT = { trait = stressed } } }
				if = { limit = { FROM = { NOT = { trait = stressed } } }
					FROM = {
						add_trait = stressed
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38282 } #I have become stressed
						}
					}
				}
			}
			75 = { }
		}
		if = { 
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 25
				add_trait = wroth
				hidden_tooltip = { 
					character_event = { id = 38254 } #I have become wroth
				}
			}
		}
		hidden_tooltip = { 
			FROM = { 
				set_character_flag = slave_punished_by_@ROOT 
			}
			opinion = { modifier = opinion_outraged who = FROM years = 5 } 
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
	}
	
	option = {
		name = "mta.168.e"
		trigger = { 
			trait = arbitrary 
			NOT = { trait = cruel }
		}
		tooltip_info = arbitrary
		custom_tooltip = { text = mta.168.clean_mess_afraid_TT }
		FROM = { imprison = ROOT }
		FROM = { opinion = { modifier = opinion_afraid who = ROOT years = 5 } }
		random_list = {
			 25 = {
				trigger = { FROM = { NOT = { trait = stressed } } }
				if = { limit = { FROM = { NOT = { trait = stressed } } }
					FROM = {
						add_trait = stressed
					}
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38282 } #I have become stressed
						}
					}
				}
			}
			75 = { }
		}
		if = { 
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 25
				add_trait = wroth
				hidden_tooltip = { 
					character_event = { id = 38254 } #I have become wroth
				}
			}
		}
		hidden_tooltip = { 
			FROM = { 
				set_character_flag = slave_punished_by_@ROOT 
			}
			opinion = { modifier = opinion_outraged who = FROM years = 5 } 
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
		}
	}
}

# Slave steals alcohol ping
character_event = {
	id = mta.169
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	has_character_flag = slave
	capable_only = yes
	prisoner = no
	
	trigger = {
		trait = slave
		NOR = {
			is_landed = yes
			is_councillor = yes
		}
		liege = { 
			slavery_enabled = yes 
			is_marriage_adult = yes
			is_playable = yes
		}
		OR = { 
			trait = drunkard
			liege = {
				NOT = { religion_group = muslim }
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 1.8
			liege = {
				OR = {
					trait = drunkard
					trait = hedonist
				}
			}
		}
		modifier = {
			factor = 0.8
			liege = { trait = temperate }
		}
		modifier = {
			factor = 1.2
			liege = { trait = gluttonous }
		}
		modifier = {
			factor = 0.4
			trait = temperate
		}
		modifier = {
			factor = 1.2
			trait = gluttonous
		}
		modifier = {
			factor = 0.4
			trait = honest
		}
		modifier = {
			factor = 1.2
			trait = deceitful
		}
		modifier = {
			factor = 0.8
			trait = just
		}
		modifier = {
			factor = 1.8
			trait = drunkard
		}
		modifier = {
			factor = 1.8
			trait = hedonist
		}
		modifier = {
			factor = 1.2
			trait = depressed
		}
		modifier = {
			factor = 1.2
			trait = stressed
		}
		modifier = {
			factor = 0.4
			has_character_flag = slave_punished_by_@LIEGE
		}
	}
	
	immediate = {
		liege = { character_event = { id = mta.170 days = 7 random = 7 } }
	}
}

# Slave steals alcohol
character_event = {
	id = mta.170
	desc = "mta.170.desc"
	picture = GFX_evt_eavesdropping
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			trait = slave
			NOR = {
				is_landed = yes
				is_councillor = yes
				in_command = yes
			}
		}
		slavery_enabled = yes 
		is_marriage_adult = yes
		in_command = no
	}
	
	fail_trigger_effect = { #If something temporary stopped this, let's try the ping event one more time
		if = {
			limit = {
				NOT = { has_character_flag = refiring_event }
				FROM = {
					trait = slave
					NOR = {
						is_landed = yes
						is_councillor = yes
					}
				}
				OR = {
					FROM = { in_command = yes }
					ROOT = { in_command = yes }
				}
			}
			set_character_flag = refiring_event
			character_event = { id = mta.169 days = 14 random = 14 }
		}
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
		}
	}
	
	immediate = {
		log = "MTA EVENTS: Slave [From.GetFirstName] stealing alcohol in the court of [Root.GetBestName]" 
	}
	
	option = {
		name = "mta.170.a"
		trigger = { trait = drunkard }
		tooltip_info = drunkard
		custom_tooltip = { text = mta.170.drink_TT }
		FROM = { opinion = { modifier = opinion_delighted who = ROOT years = 5 } }
		random_list = {
			15 = {
				trigger = { FROM = { NOT = { trait = drunkard } } }
				if = { limit = { FROM = { NOT = { trait = drunkard } } }
					FROM = {
						add_trait = drunkard
					}
					add_friend = FROM
					hidden_tooltip = { 
						FROM = {
							character_event = { id = 38286 } #I am a Drunkard
						}
					}
				}
			}
			15 = {
				trigger = { FROM = { trait = drunkard } }
				add_friend = FROM
			}
			15 = {
				trigger = { trait = stressed }
				if = { limit = { trait = stressed }
					remove_trait = stressed
					hidden_tooltip = { 
						character_event = { id = 38313 } #I am no longer Stressed
					}
				}
			}
			70 = { }
		}
		hidden_tooltip = { opinion = { modifier = opinion_impressed who = FROM years = 5 } }
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				trait = hedonist
			}
		}
	}
	
	option = {
		name = "mta.170.b"
		trigger = { 
			trait = hedonist 
			OR = {
				is_opposite_sex = FROM
				AND = {
					trait = homosexual
					FROM = { trait = homosexual }
				}
			}
		}
		tooltip_info = hedonist
		custom_tooltip = { text = mta.170.hedonist_TT }
		FROM = { opinion = { modifier = opinion_impressed_infatuated who = ROOT years = 5 } }
		random_list = {
			15 = {
				trigger = { NOT = { trait = lustful } }
				if = { limit = { NOT = { trait = lustful } }
					add_trait = lustful
					add_lover = FROM
					hidden_tooltip = { 
						character_event = { id = 38272 } #I have become lustful
					}
				}
			}
			15 = {
				trigger = { trait = lustful }
				add_lover = FROM
			}
			15 = {
				trigger = { trait = stressed }
				if = { limit = { trait = stressed }
					remove_trait = stressed
					hidden_tooltip = { 
						character_event = { id = 38313 } #I am no longer Stressed
					}
				}
			}
			70 = { }
		}
		hidden_tooltip = { opinion = { modifier = opinion_impressed who = FROM years = 5 } }
		hidden_tooltip = {
			mta_unprotected_sex_effect = yes
			if = {
				limit = {
					FROM = { is_female = no }
					ROOT = { is_female = yes }
					ROOT = { is_pregnant = no }
				}
				random = {
					chance = 87
					mta_check_fertility_score = yes
					if = {
						limit = {
							OR = {
								any_spouse = { character = FROM }
								any_consort = { character = FROM }
							}
						}
						ROOT = { impregnate = FROM }
						break = yes
					}
					if = {
						limit = {
							NOR = {
								any_spouse = { character = FROM }
								any_consort = { character = FROM }
							}
						}
						ROOT = { impregnate_cuckoo = FROM }
						break = yes
					}
				}
			}
			if = {
				limit = {
					ROOT = { is_female = no }
					FROM = { is_female = yes }
					FROM = { is_pregnant = no }
				}
				random = {
					chance = 87
					mta_check_fertility_score = yes
					if = {
						limit = {
							OR = {
								any_spouse = { character = FROM }
								any_consort = { character = FROM }
							}
						}
						FROM = { impregnate = ROOT }
						break = yes
					}
					if = {
						limit = {
							NOR = {
								any_spouse = { character = FROM }
								any_consort = { character = FROM }
							}
						}
						FROM = { impregnate_cuckoo = ROOT }
						break = yes
					}

				}
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = lustful
			}
		}
	}
	
	option = {
		name = "mta.170.c"
		custom_tooltip = { text = mta.170.pardon_slave_TT }
		prestige = -10
		FROM = { opinion = { modifier = opinion_worried who = ROOT years = 5 } }
		hidden_tooltip = { 
			FROM = { 
				set_character_flag = slave_punished_by_@ROOT 
			}
			opinion = { modifier = opinion_unimpressed who = FROM years = 5 } 
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = humble
			}
		}
	}
	
	option = {
		name = "mta.170.d"
		custom_tooltip = { text = mta.168.clean_mess_afraid_TT }
		FROM = { imprison = ROOT }
		FROM = { opinion = { modifier = opinion_afraid who = ROOT years = 5 } }
		hidden_tooltip = { 
			FROM = { 
				set_character_flag = slave_punished_by_@ROOT 
			}
			opinion = { modifier = opinion_thief who = FROM years = 5 } 
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 3
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = wroth
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
		}
	}
}

# Slaves bickering ping
character_event = {
	id = mta.171
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 12
	has_character_flag = slave
	capable_only = yes
	prisoner = no
	
	trigger = {
		trait = slave
		NOT = { is_landed = yes }
		liege = { 
			slavery_enabled = yes 
			is_playable = yes
		}
		any_host_courtier = {
			count = 2
			trait = slave
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 0
			liege = { trait = deaf }
		}
		modifier = {
			factor = 1.8
			liege = { trait = perceptive }
		}
		modifier = {
			factor = 0.8
			liege = { trait = just }
		}
		modifier = {
			factor = 1.8
			liege = { trait = arbitrary }
		}
		modifier = {
			factor = 1.2
			trait = stubborn
		}
		modifier = {
			factor = 0.8
			trait = diligent
		}
		modifier = {
			factor = 1.8
			trait = slothful
		}
		modifier = {
			factor = 0.8
			trait = patient
		}
		modifier = {
			factor = 1.2
			trait = wroth
		}
		modifier = {
			factor = 0.8
			trait = humble
		}
		modifier = {
			factor = 1.8
			trait = envious
		}
		modifier = {
			factor = 0.8
			trait = charitable
		}
		modifier = {
			factor = 1.2
			trait = greedy
		}
		modifier = {
			factor = 0.8
			trait = temperate
		}
		modifier = {
			factor = 1.2
			OR = {
				trait = gluttonous
				AND = {
					trait = is_fat
					NOT = { has_character_modifier = hard_diet }
				}
			}
		}
		modifier = {
			factor = 1.8
			trait = depressed
		}
		modifier = {
			factor = 1.8
			trait = stressed
		}
		modifier = {
			factor = 1.2
			OR = {
				has_disease_trigger = yes
				has_symptom_trigger = yes
				has_severe_disability_trigger = yes
				has_medium_disability_trigger = yes
			}
		}
	}
	
	immediate = {
		#log = "MTA EVENTS: Slave bickering ping on [Root.GetFirstName]" 
		random_host_courtier = {
			limit = {
				trait = slave
				NOT = { character = ROOT }
				is_landed = no
				in_command = no
				prisoner = no
			}
			save_event_target_as = slave_bickerer
		}
		liege = { character_event = { id = mta.172 days = 7 random = 7 } }
	}
}

# Slaves bickering
character_event = {
	id = mta.172
	desc = "mta.172.desc"
	picture = GFX_evt_quarrel
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			trait = slave
			NOR = {
				is_landed = yes
				in_command = yes
			}
		}
		event_target:slave_bickerer = {
			trait = slave
			NOR = {
				is_landed = yes
				in_command = yes
			}
		}
		slavery_enabled = yes 
		in_command = no
	}
	
	fail_trigger_effect = { #If something temporary stopped this, let's try the ping event one more time
		if = {
			limit = {
				NOT = { has_character_flag = refiring_event }
				FROM = {
					trait = slave
					NOT = { is_landed = yes }
				}
				event_target:slave_bickerer = {
					trait = slave
					NOT = { is_landed = yes }
				}
				OR = {
					FROM = { in_command = yes }
					ROOT = { in_command = yes }
					event_target:slave_bickerer = { in_command = yes }
				}
			}
			#log = "MTA EVENTS: Slave bickering failed to match trigger conditions on [Root.GetFirstName]: refiring ping event" 
			set_character_flag = refiring_event
			character_event = { id = mta.171 days = 14 random = 14 }
		}
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
			#log = "MTA EVENTS: Slave bickering failed to match trigger conditions on [Root.GetFirstName] for the second time" 
		}
	}
	
	immediate = {
		log = "MTA EVENTS: Slaves [From.GetFirstName] and [slave_bickerer.GetFirstName] bickering in the court of [Root.GetBestName]" 
	}
	
	option = {
		name = "mta.172.a"
		trigger = { diplomacy >= 10 }
		tooltip_info = diplomacy
		FROM = { opinion = { modifier = opinion_approves who = ROOT years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_approves who = ROOT years = 5 } }
		ai_chance = {
			factor = 40
		}
	}
	
	option = {
		name = "mta.172.b"
		FROM = { opinion = { modifier = opinion_feels_appreciated who = ROOT years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_unappreciated who = ROOT years = 5 } }
		FROM = { opinion = { modifier = opinion_annoyed who = event_target:slave_bickerer years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				opinion = { who = FROM value = 60 }
				NOT = { opinion = { who = event_target:slave_bickerer value = 20 } }
			}
		}
	}
	
	option = {
		name = "mta.172.c"
		FROM = { opinion = { modifier = opinion_unappreciated who = ROOT years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_feels_appreciated who = ROOT years = 5 } }
		FROM = { opinion = { modifier = opinion_annoyed who = event_target:slave_bickerer years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				opinion = { who = event_target:slave_bickerer value = 60 }
				NOT = { opinion = { who = FROM value = 20 } }
			}
		}
	}
	
	option = {
		name = "mta.172.d"
		prestige = 10
		FROM = { opinion = { modifier = opinion_annoyed who = ROOT years = 5 } }
		FROM = { opinion = { modifier = opinion_annoyed who = event_target:slave_bickerer years = 5 } }
		event_target:slave_bickerer = { opinion = { modifier = opinion_annoyed who = FROM years = 5 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				ai_ambition = 40
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = slothful
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = refiring_event }
			clr_character_flag = refiring_event
		}
	}
}

# AI Purchase Slave: Martial
character_event = {
	id = mta.191
	
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	ai = yes
	
	trigger = {
		is_playable = yes
		slavery_enabled = yes 
		OR = {
			AND = {
				tier = emperor
				wealth >= 50
			}
			AND = {
				NOT = { tier = emperor }
				wealth >= 25
			}
		}
		NOT = {
			any_host_courtier = {
				count = 3
				has_education_martial_trigger = yes
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		log = "MTA EVENTS: [Root.GetBestName] purchased a slave with Martial education" 
		save_event_target_as = slaver
		if = { 
			limit = { tier = emperor }
			wealth = -25
		}
		if = { 
			limit = { NOT = { tier = emperor } }
			wealth = -10
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			female = no
			culture = ROOT
			religion = ROOT
			attributes = {
				diplomacy = 2
				martial = 5
				stewardship = 2
				intrigue = 2
				learning = 2
			}
		}
		new_character = {
			hidden_tooltip = {
				new_slave_effect = yes
				enslave_effect = yes
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_lifestyle_trait_effect = yes
				random_list = {
					20 = { }
					15 = { change_martial = 1 }
					10 = { change_martial = 2 }
					5  = { change_martial = 3 }
					3  = { change_martial = 4 }
					2  = { change_martial = 5 }
				}
				random_list = {
					50 = { }
					16 = { add_trait = duelist }
					12 = { add_trait = hunter }
					12 = { add_trait = strategist }
					5  = { add_trait = tall }
					5  = { add_trait = imposing }
					2  = {
						add_trait = tall
						add_trait = imposing
					}
				}
				random_list = {
					95 = { }
					5  = { add_trait = robust }
				}
				if = { 
					limit = {
						NOT = { has_any_leadership_trait_trigger = yes }
						trait = brilliant_strategist
					}
					add_random_commander_trait_effect = yes
				}
				if = {
					limit = {
						OR = {
							religion = hellenic_pagan
							religion = hellenic_pagan_reformed
							has_religion_feature = religion_astrology
						}
					}
					hidden_tooltip = { add_western_zodiac_trait_effect = yes }
				}
				if = {
					limit = {
						has_religion_feature = religion_no_leader
						religion_group = pagan_group
					}
					random_list = {  
						5 = {
							add_trait = pagan_branch_1
						}
						25 = {
							add_trait = pagan_branch_2
						}
						25 = {
							add_trait = pagan_branch_3
						}
						25 = {
							add_trait = pagan_branch_4
						}
					}
				}
			} 
		}
	}
}

# AI Purchase Slave: Martial Gladiator
character_event = {
	id = mta.192
	
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	ai = yes
	
	trigger = {
		is_playable = yes
		slavery_enabled = yes 
		OR = {
			tier = emperor
			tier = king
		}
		OR = {
			AND = {
				tier = emperor
				wealth >= 100
			}
			AND = {
				NOT = { tier = emperor }
				wealth >= 50
			}
		}
		NOT = {
			any_host_courtier = {
				count = 4
				has_education_martial_trigger = yes
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		log = "MTA EVENTS: [Root.GetBestName] purchased a slave gladiator with Martial education" 
		save_event_target_as = slaver
		if = { 
			limit = { tier = emperor }
			wealth = -50
		}
		if = { 
			limit = { tier = king }
			wealth = -25
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			female = no
			culture = ROOT
			religion = ROOT
			attributes = {
				diplomacy = 2
				martial = 5
				stewardship = 2
				intrigue = 2
				learning = 2
			}
		}
		new_character = {
			hidden_tooltip = {
				new_slave_effect = yes
				enslave_effect = yes
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_trait = craven
				remove_education_effect = yes
				random_list = {
					50 = { add_trait = skilled_tactician }
					30 = { add_trait = tough_soldier }
					20 = { add_trait = brilliant_strategist }
				}
				remove_lifestyle_trait_effect = yes
				add_trait = duelist
				random_list = {
					15 = { }
					16 = { change_martial = 1 }
					11 = { change_martial = 2 }
					6  = { change_martial = 3 }
					4  = { change_martial = 4 }
					3  = { change_martial = 5 }
				}
				# Set some interesting traits
				random = {
					chance = 15
					add_trait = uncouth
				}
				random = {
					chance = 5
					add_trait = dull
				}
				random = {
					chance = 5
					add_trait = wroth
				}
				random = {
					chance = 5
					add_trait = envious
				}
				random = {
					chance = 5
					add_trait = stubborn
				}
				random = {
					chance = 5
					add_trait = proud
				}
				random = {
					chance = 5
					add_trait = lefthanded
				}
				random = {
					chance = 5
					add_trait = one_eyed
				}
				random_list = {
					44 = {
						change_variable = { which = scarred_variable value = 1 }
						add_scarred_tiered_effect = yes
					}
					33 = {
						change_variable = { which = scarred_variable value = 5 }
						add_scarred_tiered_effect = yes
					}
					23 = {
						change_variable = { which = scarred_variable value = 10 }
						add_scarred_tiered_effect = yes
					}
				}
				random_list = {
					78 = { }
					5 =  { add_trait = sturdy }
					5  = { add_trait = strong }
					5  = { add_trait = tall }
					5  = { add_trait = imposing }
					2  = {
						add_trait = tall
						add_trait = imposing
					}
				}
				random_list = {
					92 = { }
					8  = { add_trait = robust }
				}
				random_list = {
					98 = { }
					2  = { add_trait = giant }
				}
				if = { 
					limit = {
						NOT = { has_any_leadership_trait_trigger = yes }
						trait = brilliant_strategist
					}
					add_random_commander_trait_effect = yes
				}
				if = {
					limit = {
						OR = {
							religion = hellenic_pagan
							religion = hellenic_pagan_reformed
							has_religion_feature = religion_astrology
						}
					}
					hidden_tooltip = { add_western_zodiac_trait_effect = yes }
				}
				if = {
					limit = {
						has_religion_feature = religion_no_leader
						religion_group = pagan_group
					}
					random_list = {  
						5 = {
							add_trait = pagan_branch_1
						}
						25 = {
							add_trait = pagan_branch_2
						}
						25 = {
							add_trait = pagan_branch_3
						}
						25 = {
							add_trait = pagan_branch_4
						}
					}
				}
				mta_give_warrior_nickname_effect = yes
			}		
		}
	}
}

# AI Purchase Slave: Stewardship
character_event = {
	id = mta.193
	
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	ai = yes
	
	trigger = {
		is_playable = yes
		slavery_enabled = yes 
		OR = {
			AND = {
				tier = emperor
				wealth >= 50
			}
			AND = {
				NOT = { tier = emperor }
				wealth >= 25
			}
		}
		NOT = {
			any_host_courtier = {
				count = 3
				has_education_stewardship_trigger = yes
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		log = "MTA EVENTS: [Root.GetBestName] purchased a slave with Stewardship education" 
		save_event_target_as = slaver
		if = { 
			limit = { tier = emperor }
			wealth = -25
		}
		if = { 
			limit = { NOT = { tier = emperor } }
			wealth = -10
		}
		create_random_steward = {
			random_traits = yes
			dynasty = none
			female = no
			culture = ROOT
			religion = ROOT
			attributes = {
				diplomacy = 2
				martial = 2
				stewardship = 5
				intrigue = 2
				learning = 2
			}
		}
		new_character = {
			hidden_tooltip = {
				new_slave_effect = yes
				enslave_effect = yes
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_lifestyle_trait_effect = yes
				random_list = {
					20 = { }
					15 = { change_stewardship = 1 }
					10 = { change_stewardship = 2 }
					5  = { change_stewardship = 3 }
					3  = { change_stewardship = 4 }
					2  = { change_stewardship = 5 }
				}
				random_list = {
					55 = { }
					15 = { add_trait = gardener }
					15 = { add_trait = architect }
					15 = { add_trait = administrator }
				}
				random_list = {
					95 = { }
					5  = { add_trait = robust }
				}
				if = {
					limit = {
						OR = {
							religion = hellenic_pagan
							religion = hellenic_pagan_reformed
							has_religion_feature = religion_astrology
						}
					}
					hidden_tooltip = { add_western_zodiac_trait_effect = yes }
				}
				if = {
					limit = {
						has_religion_feature = religion_no_leader
						religion_group = pagan_group
					}
					random_list = {  
						5 = {
							add_trait = pagan_branch_1
						}
						25 = {
							add_trait = pagan_branch_2
						}
						25 = {
							add_trait = pagan_branch_3
						}
						25 = {
							add_trait = pagan_branch_4
						}
					}
				}
			}
		}
	}
}

# AI Purchase Slave: Learning Doctor
character_event = {
	id = mta.194
	
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	ai = yes
	
	trigger = {
		is_playable = yes
		slavery_enabled = yes 
		OR = {
			tier = emperor
			tier = king
		}
		OR = {
			AND = {
				tier = emperor
				wealth >= 100
			}
			AND = {
				NOT = { tier = emperor }
				wealth >= 50
			}
		}
		NOR = {
			is_tribal = yes
			is_nomadic = yes
		}
		NOT = {
			any_host_courtier = {
				count = 4
				has_education_learning_trigger = yes
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		log = "MTA EVENTS: [Root.GetBestName] purchased a slave doctor with Learning education" 
		save_event_target_as = slaver
		if = { 
			limit = { tier = emperor }
			wealth = -50
		}
		if = { 
			limit = { tier = king }
			wealth = -25
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = ROOT
			religion = ROOT
			age = 35
			attributes = {
				diplomacy = 2
				martial = 2
				stewardship = 2
				intrigue = 2
				learning = 8
			}
			health = 6
			flag = is_court_physician
		}
		new_character = {
			hidden_tooltip = {
				new_slave_effect = yes
				enslave_effect = yes
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_education_effect = yes
				random_list = {
					50 = { add_trait = scholarly_theologian }
					30 = { add_trait = martial_cleric }
					20 = { add_trait = mastermind_theologian }
				}
				remove_lifestyle_trait_effect = yes
				add_trait = physician
				random_list = {
					20 = { }
					15 = { change_learning = 1 }
					10 = { change_learning = 2 }
					5  = { change_learning = 3 }
					3  = { change_learning = 4 }
					2  = { change_learning = 5 }
				}
				random_list = {
					70 = { }
					15 = { add_trait = mystic }
					15 = { add_trait = scholar }
				}
				random_list = {
					92 = { }
					8  = { add_trait = shrewd }
				}
				if = {
					limit = {
						OR = {
							religion = hellenic_pagan
							religion = hellenic_pagan_reformed
							has_religion_feature = religion_astrology
						}
					}
					hidden_tooltip = { add_western_zodiac_trait_effect = yes }
				}
				if = {
					limit = {
						has_religion_feature = religion_no_leader
						religion_group = pagan_group
					}
					random_list = {  
						5 = {
							add_trait = pagan_branch_1
						}
						25 = {
							add_trait = pagan_branch_2
						}
						25 = {
							add_trait = pagan_branch_3
						}
						25 = {
							add_trait = pagan_branch_4
						}
					}
				}
			}
			if = {
				limit = { 
					PREV = { NOT = { has_assigned_minor_title = title_court_physician } }
				}
				give_minor_title = title_court_physician
			}
		}
	}
}