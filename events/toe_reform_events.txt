namespace = toe

#Lose economic reform
# ROOT is the character, FROM is the title, FROMFROM is the old holder
character_event = {
	id = toe.1200
	
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			OR	= {
				has_character_modifier = economic_reform_1
				has_character_modifier = economic_reform_2
				has_character_modifier = economic_reform_3
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = { has_character_modifier = economic_reform_3 }
			}
			remove_character_modifier = economic_reform_3
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = economic_reform_2 }
			}
			add_character_modifier = { 
				name = economic_reform_3
				duration = -1
			}
			remove_character_modifier = economic_reform_2
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = economic_reform_1 }
			}
			add_character_modifier = { 
				name = economic_reform_2
				duration = -1
			}
			remove_character_modifier = economic_reform_1
		}
	}
}

#Lose military reform
# ROOT is the character, FROM is the title, FROMFROM is the old holder
character_event = {
	id = toe.1201
	
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			OR	= {
				has_character_modifier = military_reform_1
				has_character_modifier = military_reform_2
				has_character_modifier = military_reform_3
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = { has_character_modifier = military_reform_3 }
			}
			remove_character_modifier = military_reform_3 
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = military_reform_2 }
			}
			add_character_modifier = { 
				name = military_reform_3
				duration = -1
			}
			remove_character_modifier = military_reform_2
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = military_reform_1 }
			}
			add_character_modifier = { 
				name = military_reform_2
				duration = -1
			}
			remove_character_modifier = military_reform_1
		}
	}
}

#Lose inflation every ten years
character_event = {
	id = toe.1202
	
	hide_window = yes

	trigger = {
		OR	= {
			has_character_modifier = imperial_inflation_1
			has_character_modifier = imperial_inflation_2
			has_character_modifier = imperial_inflation_3
			has_character_modifier = imperial_inflation_4
		}
	}
	
	mean_time_to_happen = {
		years = 10
	}
	
	immediate = {
		if = {
			limit = {
				has_character_modifier = imperial_inflation_4
			}
			remove_character_modifier = imperial_inflation_4
		}
		if = {
			limit = {
				has_character_modifier = imperial_inflation_3
			}
			add_character_modifier = { 
				name = imperial_inflation_4
				duration = -1
			}
			remove_character_modifier = imperial_inflation_3
		}
		if = {
			limit = {
				has_character_modifier = imperial_inflation_2
			}
			add_character_modifier = { 
				name = imperial_inflation_3
				duration = -1
			}
			remove_character_modifier = imperial_inflation_2
		}
		if = {
			limit = {
				has_character_modifier = imperial_inflation_1
			}
			add_character_modifier = { 
				name = imperial_inflation_2
				duration = -1
			}
			remove_character_modifier = imperial_inflation_1 
		}
	}
}

#Gain the inflation or court of your predecessor
character_event = {
	id = toe.1203
	
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			OR	= {
				has_character_modifier = imperial_inflation_1
				has_character_modifier = imperial_inflation_2
				has_character_modifier = imperial_inflation_3
				has_character_modifier = imperial_inflation_4
				has_character_modifier = court_ritual_losses_1
				has_character_modifier = court_ritual_losses_2
				has_character_modifier = court_ritual_losses_3
				has_character_modifier = court_ritual_losses_4
				has_character_modifier = court_ritual_losses_5
				has_character_modifier = court_ritual_losses_6
				has_character_modifier = court_ritual_losses_7
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = { has_character_modifier = imperial_inflation_1 }
			}
			add_character_modifier = { 
				name = imperial_inflation_1
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = imperial_inflation_2 }
			}
			add_character_modifier = { 
				name = imperial_inflation_2
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = imperial_inflation_3 }
			}
			add_character_modifier = { 
				name = imperial_inflation_3
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = imperial_inflation_4 }
			}
			add_character_modifier = { 
				name = imperial_inflation_4
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_1 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_1
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_2 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_2
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_3 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_3
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_4 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_4
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_5 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_5
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_6 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_6
				duration = -1
			}
		}
		if = {
			limit = {
				FROMFROM = { has_character_modifier = court_ritual_losses_7 }
			}
			add_character_modifier = { 
				name = court_ritual_losses_7
				duration = -1
			}
		}
	}
}

#Remove modifier from any former emperor
character_event = {
	id = toe.1204
	
	hide_window = yes

	trigger = {
		OR	= {
			has_character_modifier = military_reform_1
			has_character_modifier = military_reform_2
			has_character_modifier = military_reform_3
			has_character_modifier = economic_reform_1
			has_character_modifier = economic_reform_2
			has_character_modifier = economic_reform_3
			has_character_modifier = imperial_inflation_1
			has_character_modifier = imperial_inflation_2
			has_character_modifier = imperial_inflation_3
			has_character_modifier = imperial_inflation_4
			has_character_modifier = empire_birth_bonus_1
			has_character_modifier = empire_birth_bonus_2
			has_character_modifier = empire_birth_bonus_3
			has_character_modifier = empire_birth_bonus_4
			has_character_modifier = court_ritual_losses_1
			has_character_modifier = court_ritual_losses_2
			has_character_modifier = court_ritual_losses_3
			has_character_modifier = court_ritual_losses_4
			has_character_modifier = court_ritual_losses_5
			has_character_modifier = court_ritual_losses_6
			has_character_modifier = court_ritual_losses_7
		}
		OR = {
			NOT = { real_tier = EMPEROR }
			AND = {
				real_tier = EMPEROR
				OR = {
					is_nomadic = yes
					is_tribal = yes
				}
			}
		}
	}
	
	mean_time_to_happen = { days = 1 }
	
	immediate = {
		remove_character_modifier = military_reform_1
		remove_character_modifier = military_reform_2
		remove_character_modifier = military_reform_3
		remove_character_modifier = economic_reform_1
		remove_character_modifier = economic_reform_2
		remove_character_modifier = economic_reform_3
		remove_character_modifier = imperial_inflation_1
		remove_character_modifier = imperial_inflation_2
		remove_character_modifier = imperial_inflation_3
		remove_character_modifier = imperial_inflation_4
		remove_character_modifier = empire_birth_bonus_1
		remove_character_modifier = empire_birth_bonus_2
		remove_character_modifier = empire_birth_bonus_3
		remove_character_modifier = empire_birth_bonus_4
		remove_character_modifier = court_ritual_losses_1
		remove_character_modifier = court_ritual_losses_2
		remove_character_modifier = court_ritual_losses_3
		remove_character_modifier = court_ritual_losses_4
		remove_character_modifier = court_ritual_losses_5
		remove_character_modifier = court_ritual_losses_6
		remove_character_modifier = court_ritual_losses_7
	}
}

#Lose birth bonus
# ROOT is the character, FROM is the title, FROMFROM is the old holder
character_event = {
	id = toe.1205
	
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			OR	= {
				has_character_modifier = empire_birth_bonus_1
				has_character_modifier = empire_birth_bonus_2
				has_character_modifier = empire_birth_bonus_3
				has_character_modifier = empire_birth_bonus_4
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				has_character_modifier = empire_birth_bonus_4
			}
			remove_character_modifier = empire_birth_bonus_4
		}
		if = {
			limit = {
				has_character_modifier = empire_birth_bonus_3
			}
			add_character_modifier = { 
				name = empire_birth_bonus_4
				duration = -1
			}
			remove_character_modifier = empire_birth_bonus_3
		}
		if = {
			limit = {
				has_character_modifier = empire_birth_bonus_2
			}
			add_character_modifier = { 
				name = empire_birth_bonus_3
				duration = -1
			}
			remove_character_modifier = empire_birth_bonus_2
		}
		if = {
			limit = {
				has_character_modifier = empire_birth_bonus_1
			}
			add_character_modifier = { 
				name = empire_birth_bonus_2
				duration = -1
			}
			remove_character_modifier = empire_birth_bonus_1 
		}
	}
}
