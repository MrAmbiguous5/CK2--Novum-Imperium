namespace = snf
# 0. Initialize
character_event = {
	id = snf.0
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		character_event = { id = "snf.4" } # Initialize character flags
		religion_scope = {
			clr_flag = snf_autocephaly_yes
			clr_flag = snf_autocephaly_no
			if = {
	limit = { has_pentarchy = yes }
	set_autocephaly = yes
	set_flag = snf_autocephaly_yes
}
else = {
	set_autocephaly = no
	set_flag = snf_autocephaly_no
} 
			clr_flag = snf_pentarchy_yes
			clr_flag = snf_pentarchy_no
			if = {
	limit = { has_pentarchy = yes}
	set_pentarchy = yes
	set_flag = snf_pentarchy_yes
}
else = {
	set_pentarchy = no
	set_flag = snf_pentarchy_no
}
			clr_flag = snf_antipopes_yes
			clr_flag = snf_antipopes_no
			if = {
	limit = { has_pentarchy = yes}
	set_can_have_antipopes = no
	set_flag = snf_antipopes_no
}
else = {
	set_can_have_antipopes = yes
	set_flag = snf_antipopes_yes
}

			clr_flag = snf_male_temple_holders_yes
			clr_flag = snf_male_temple_holders_no
			if = {
	limit = { religion_allows_male_temple_holders = yes }
	set_male_temple_holders = yes
	set_flag = snf_male_temple_holders_yes
}
else = {
	set_male_temple_holders = no
	set_flag = snf_male_temple_holders_no
}
			clr_flag = snf_female_temple_holders_yes
			clr_flag = snf_female_temple_holders_no
			if = {
	limit = { religion_allows_female_temple_holders = yes }
	set_female_temple_holders = yes
	set_flag = snf_female_temple_holders_yes
}
else = {
	set_female_temple_holders = no
	set_flag = snf_female_temple_holders_no
}

			set_priests_can_marry = yes
			set_flag = snf_priests_can_marry_yes
			clr_flag = snf_priests_can_marry_no
			set_priests_can_inherit = no
			clr_flag = snf_priests_can_inherit_yes
			set_flag = snf_priests_can_inherit_no
			set_can_excommunicate = no
			clr_flag = snf_excommunication_yes
			set_flag = snf_excommunication_no
			clr_flag = snf_call_crusade_yes
			clr_flag = snf_call_crusade_no
			if = {
	limit = { any_independent_ruler = { religion = PREV can_call_crusade = yes } }
	set_flag = snf_call_crusade_yes
}
else = {
	set_flag = snf_call_crusade_no
}
			set_can_grant_invasion_cb = no
			clr_flag = snf_grant_invasion_yes
			set_flag = snf_grant_invasion_no
			set_can_grant_divorce = no
			clr_flag = snf_grant_divorce_yes
			set_flag = snf_grant_divorce_no
			set_can_grant_claim = no
			clr_flag = snf_grant_claim_yes
			set_flag = snf_grant_claim_no
			set_short_reign_opinion_year_mult = 1.00
			clr_flag = snf_short_reign_0_00
			clr_flag = snf_short_reign_0_25
			clr_flag = snf_short_reign_0_50
			clr_flag = snf_short_reign_0_75
			set_flag = snf_short_reign_1_00
			clr_flag = snf_short_reign_1_25
			clr_flag = snf_short_reign_1_50
			clr_flag = snf_short_reign_1_75
			clr_flag = snf_short_reign_2_00
			clr_flag = snf_short_reign_2_50
			clr_flag = snf_short_reign_3_00
			set_heir_designation = no
			clr_flag = snf_heir_designation_yes
			set_flag = snf_heir_designation_no
			clr_flag = snf_feminist_yes
			clr_flag = snf_feminist_no
			if = {
	limit = { has_religious_feature = religion_equal }
	set_feminist = yes
	set_flag = snf_feminist_yes
}
else = {
	set_feminist = no
	set_flag = snf_feminist_no
}
			set_can_retire_to_monastery = yes
			set_flag = snf_monastery_yes
			clr_flag = snf_monastery_no
			clr_flag = snf_decadence_yes
			clr_flag = snf_decadence_no
			if = {
	limit = { PREV = { uses_decadence = yes } }
	set_flag = snf_decadence_yes
}
else = {
	set_flag = snf_decadence_no
}

			set_convert_other_groups = 2
			clr_flag = snf_convert_other_groups_0
			clr_flag = snf_convert_other_groups_1
			set_flag = snf_convert_other_groups_2
			set_convert_same_group = 1
			clr_flag = snf_convert_same_group_0
			set_flag = snf_convert_same_group_1
			clr_flag = snf_convert_same_group_2
			clr_flag = snf_hard_to_convert_yes
			clr_flag = snf_hard_to_convert_no
			if = {
	limit = { ROOT = { is_hard_to_convert = yes } }
	set_hard_to_convert = yes
	set_flag = snf_hard_to_convert_yes
}
else = {
	set_hard_to_convert = no
	set_flag = snf_hard_to_convert_no
}
			set_jizya_tax = no
			clr_flag = snf_jizya_tax_yes
			set_flag = snf_jizya_tax_no
			set_peace_piety_gain = 0.0
			set_flag = snf_peace_piety_gain_0_0
			clr_flag = snf_peace_piety_gain_1_0
			clr_flag = snf_peace_piety_gain_2_0
			clr_flag = snf_peace_piety_gain_3_0
			clr_flag = snf_peace_piety_gain_4_0
			set_peace_prestige_loss = no
			clr_flag = snf_peace_prestige_loss_yes
			set_flag = snf_peace_prestige_loss_no
			set_piety_loss_for_attacking_same_religion = no
			clr_flag = snf_piety_loss_faithful_yes
			set_flag = snf_piety_loss_faithful_no
			set_raised_vassal_opinion_loss = yes
			set_flag = snf_raised_vassal_opinion_loss_yes
			clr_flag = snf_raised_vassal_opinion_loss_no
			set_ai_aggression = 1.00
			clr_flag = snf_ai_aggression_0_00
			clr_flag = snf_ai_aggression_0_25
			clr_flag = snf_ai_aggression_0_50
			clr_flag = snf_ai_aggression_0_75
			set_flag = snf_ai_aggression_1_00
			clr_flag = snf_ai_aggression_1_25
			clr_flag = snf_ai_aggression_1_50
			clr_flag = snf_ai_aggression_1_75
			clr_flag = snf_ai_aggression_2_00
			clr_flag = snf_pacifist_yes
			clr_flag = snf_pacifist_no
			if = {
	limit = { has_religious_feature = religion_pacifist }
	set_pacifist = yes
	set_flag = snf_pacifist_yes
}
else = {
	set_pacifist = no
	set_flag = snf_pacifist_no
}
			enable_prepared_invasion = no
			clr_flag = snf_prepared_invasions_yes
			set_flag = snf_prepared_invasions_no
			set_allow_looting = no
			clr_flag = snf_looting_yes
			set_flag = snf_looting_no
			clr_flag = snf_seafaring_yes
			clr_flag = snf_seafaring_no
			if = {
	limit = { ROOT = { is_seafarer = yes } }
	set_seafaring = yes
	set_flag = snf_seafaring_yes
}
else = {
	set_seafaring = no
	set_flag = snf_seafaring_no
}
			set_allow_rivermovement = no
			clr_flag = snf_river_movement_yes
			set_flag = snf_river_movement_no
			set_defensive_attrition = no
			clr_flag = snf_defensive_attrition_yes
			set_flag = snf_defensive_attrition_no
			set_ignores_defensive_attrition = no
			clr_flag = snf_ignore_defensive_attrition_yes
			set_flag = snf_ignore_defensive_attrition_no
			clr_flag = snf_max_wives_1
			clr_flag = snf_max_wives_2
			clr_flag = snf_max_wives_3
			clr_flag = snf_max_wives_4
			clr_flag = snf_max_wives_5
			clr_flag = snf_max_wives_6
			clr_flag = snf_max_wives_7
			clr_flag = snf_max_wives_8
			clr_flag = snf_max_wives_9
			clr_flag = snf_max_wives_10
			clr_flag = snf_max_wives_100
			if = {
	limit = {
		any_character = {
			religion = PREV
			is_female = no
			num_of_spouses > 1
		}
	}
	set_max_wives = 4
	set_flag = snf_max_wives_4
}
else = {
	set_max_wives = 1
	set_flag = snf_max_wives_1
}
			set_allows_matrilineal_marriage = yes
			set_flag = snf_matrilineal_marriages_yes
			clr_flag = snf_matrilineal_marriages_no
			clr_flag = snf_max_consorts_0
			clr_flag = snf_max_consorts_1
			clr_flag = snf_max_consorts_2
			clr_flag = snf_max_consorts_3
			clr_flag = snf_max_consorts_4
			clr_flag = snf_max_consorts_5
			clr_flag = snf_max_consorts_6
			clr_flag = snf_max_consorts_7
			clr_flag = snf_max_consorts_8
			clr_flag = snf_max_consorts_9
			clr_flag = snf_max_consorts_99
			if = {
	limit = { has_concubinage = yes }
	set_max_consorts = 3
	set_flag = snf_max_consorts_3
} else = {
	set_max_concubines = 0
	set_flag = snf_max_consorts_0
}
			set_men_can_take_consorts = yes
			set_flag = snf_concubines_yes
			clr_flag = snf_concubines_no
			set_women_can_take_consorts = yes
			set_flag = snf_consorts_yes
			clr_flag = snf_consorts_no
			set_cousin_marriage = yes
			set_flag = snf_cousin_marriage_yes
			clr_flag = snf_cousin_marriage_no
			set_psc_marriage = yes
			set_flag = snf_psc_marriage_yes
			clr_flag = snf_psc_marriage_no
			set_bs_marriage = no
			clr_flag = snf_bs_marriage_yes
			set_flag = snf_bs_marriage_no
			set_pc_marriage = no
			clr_flag = snf_pc_marriage_yes
			set_flag = snf_pc_marriage_no
			set_divine_blood = no
			clr_flag = snf_divine_blood_yes
			set_flag = snf_divine_blood_no
			set_character_modifier = {
					diplomacy = 0
					key = snf_attribute_modifier_name
				}
			clr_flag = snf_diplomacy_diplomacy_minus_3
			clr_flag = snf_diplomacy_diplomacy_minus_2
			clr_flag = snf_diplomacy_diplomacy_minus_1
			set_flag = snf_diplomacy_diplomacy_0
			clr_flag = snf_diplomacy_diplomacy_1
			clr_flag = snf_diplomacy_diplomacy_2
			clr_flag = snf_diplomacy_diplomacy_3
			clr_flag = snf_diplomacy_diplomacy_4
			clr_flag = snf_diplomacy_diplomacy_5
			clr_flag = snf_diplomacy_diplomacy_10
			clr_flag = snf_diplomacy_diplomacy_25
			clr_flag = snf_diplomacy_diplomacy_50
			clr_flag = snf_diplomacy_diplomacy_100
			set_character_modifier = {
					martial = 0
					key = snf_attribute_modifier_name
				}
			clr_flag = snf_martial_martial_minus_3
			clr_flag = snf_martial_martial_minus_2
			clr_flag = snf_martial_martial_minus_1
			set_flag = snf_martial_martial_0
			clr_flag = snf_martial_martial_1
			clr_flag = snf_martial_martial_2
			clr_flag = snf_martial_martial_3
			clr_flag = snf_martial_martial_4
			clr_flag = snf_martial_martial_5
			clr_flag = snf_martial_martial_10
			clr_flag = snf_martial_martial_25
			clr_flag = snf_martial_martial_50
			clr_flag = snf_martial_martial_100
			set_character_modifier = {
					stewardship = 0
					key = snf_attribute_modifier_name
				}
			clr_flag = snf_stewardship_stewardship_minus_3
			clr_flag = snf_stewardship_stewardship_minus_2
			clr_flag = snf_stewardship_stewardship_minus_1
			set_flag = snf_stewardship_stewardship_0
			clr_flag = snf_stewardship_stewardship_1
			clr_flag = snf_stewardship_stewardship_2
			clr_flag = snf_stewardship_stewardship_3
			clr_flag = snf_stewardship_stewardship_4
			clr_flag = snf_stewardship_stewardship_5
			clr_flag = snf_stewardship_stewardship_10
			clr_flag = snf_stewardship_stewardship_25
			clr_flag = snf_stewardship_stewardship_50
			clr_flag = snf_stewardship_stewardship_100
			set_character_modifier = {
					intrigue = 0
					key = snf_attribute_modifier_name
				}
			clr_flag = snf_intrigue_intrigue_minus_3
			clr_flag = snf_intrigue_intrigue_minus_2
			clr_flag = snf_intrigue_intrigue_minus_1
			set_flag = snf_intrigue_intrigue_0
			clr_flag = snf_intrigue_intrigue_1
			clr_flag = snf_intrigue_intrigue_2
			clr_flag = snf_intrigue_intrigue_3
			clr_flag = snf_intrigue_intrigue_4
			clr_flag = snf_intrigue_intrigue_5
			clr_flag = snf_intrigue_intrigue_10
			clr_flag = snf_intrigue_intrigue_25
			clr_flag = snf_intrigue_intrigue_50
			clr_flag = snf_intrigue_intrigue_100
			set_character_modifier = {
					learning = 0
					key = snf_attribute_modifier_name
				}
			clr_flag = snf_learning_learning_minus_3
			clr_flag = snf_learning_learning_minus_2
			clr_flag = snf_learning_learning_minus_1
			set_flag = snf_learning_learning_0
			clr_flag = snf_learning_learning_1
			clr_flag = snf_learning_learning_2
			clr_flag = snf_learning_learning_3
			clr_flag = snf_learning_learning_4
			clr_flag = snf_learning_learning_5
			clr_flag = snf_learning_learning_10
			clr_flag = snf_learning_learning_25
			clr_flag = snf_learning_learning_50
			clr_flag = snf_learning_learning_100
			set_flag = snf_init
		}
	}
}

# 1. Clear attribute flags ########################################################
character_event = {
	id = snf.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		religion_scope = {
			clr_flag = snf_diplomacy_diplomacy_minus_3
			clr_flag = snf_diplomacy_diplomacy_minus_2
			clr_flag = snf_diplomacy_diplomacy_minus_1
			set_flag = snf_diplomacy_diplomacy_0
			clr_flag = snf_diplomacy_diplomacy_1
			clr_flag = snf_diplomacy_diplomacy_2
			clr_flag = snf_diplomacy_diplomacy_3
			clr_flag = snf_diplomacy_diplomacy_4
			clr_flag = snf_diplomacy_diplomacy_5
			clr_flag = snf_diplomacy_diplomacy_10
			clr_flag = snf_diplomacy_diplomacy_25
			clr_flag = snf_diplomacy_diplomacy_50
			clr_flag = snf_diplomacy_diplomacy_100
			clr_flag = snf_martial_martial_minus_3
			clr_flag = snf_martial_martial_minus_2
			clr_flag = snf_martial_martial_minus_1
			set_flag = snf_martial_martial_0
			clr_flag = snf_martial_martial_1
			clr_flag = snf_martial_martial_2
			clr_flag = snf_martial_martial_3
			clr_flag = snf_martial_martial_4
			clr_flag = snf_martial_martial_5
			clr_flag = snf_martial_martial_10
			clr_flag = snf_martial_martial_25
			clr_flag = snf_martial_martial_50
			clr_flag = snf_martial_martial_100
			clr_flag = snf_stewardship_stewardship_minus_3
			clr_flag = snf_stewardship_stewardship_minus_2
			clr_flag = snf_stewardship_stewardship_minus_1
			set_flag = snf_stewardship_stewardship_0
			clr_flag = snf_stewardship_stewardship_1
			clr_flag = snf_stewardship_stewardship_2
			clr_flag = snf_stewardship_stewardship_3
			clr_flag = snf_stewardship_stewardship_4
			clr_flag = snf_stewardship_stewardship_5
			clr_flag = snf_stewardship_stewardship_10
			clr_flag = snf_stewardship_stewardship_25
			clr_flag = snf_stewardship_stewardship_50
			clr_flag = snf_stewardship_stewardship_100
			clr_flag = snf_intrigue_intrigue_minus_3
			clr_flag = snf_intrigue_intrigue_minus_2
			clr_flag = snf_intrigue_intrigue_minus_1
			set_flag = snf_intrigue_intrigue_0
			clr_flag = snf_intrigue_intrigue_1
			clr_flag = snf_intrigue_intrigue_2
			clr_flag = snf_intrigue_intrigue_3
			clr_flag = snf_intrigue_intrigue_4
			clr_flag = snf_intrigue_intrigue_5
			clr_flag = snf_intrigue_intrigue_10
			clr_flag = snf_intrigue_intrigue_25
			clr_flag = snf_intrigue_intrigue_50
			clr_flag = snf_intrigue_intrigue_100
			clr_flag = snf_learning_learning_minus_3
			clr_flag = snf_learning_learning_minus_2
			clr_flag = snf_learning_learning_minus_1
			set_flag = snf_learning_learning_0
			clr_flag = snf_learning_learning_1
			clr_flag = snf_learning_learning_2
			clr_flag = snf_learning_learning_3
			clr_flag = snf_learning_learning_4
			clr_flag = snf_learning_learning_5
			clr_flag = snf_learning_learning_10
			clr_flag = snf_learning_learning_25
			clr_flag = snf_learning_learning_50
			clr_flag = snf_learning_learning_100
		}
	}
}

# 2. Show initialization confirmation dialog
long_character_event = {
	id = snf.2
	is_triggered_only = yes
	picture = GFX_evt_snf_2
	hide_from = yes
	title = "evttitle_snf_2"
	desc = "evtdesc_snf_2"
	
	option = {
		name = "evtopta_snf_2"
		tooltip_info_custom = "evtoptadesc_snf_2"
		character_event = { id = "snf.0" }
	}
	option = {
		name = "evtoptb_snf_2"
	}
}

# 3. Show reset confirmation dialog
character_event = {
	id = snf.3
	is_triggered_only = yes
	picture = GFX_evt_snf_3
	hide_from = yes
	title = "evttitle_snf_3"
	desc = "evtdesc_snf_3"
	
	option = {
		name = "evtopta_snf_3"
		tooltip_info_custom = "evtoptadesc_snf_3"
		character_event = { id = "snf.0" }
	}
	option = {
		name = "evtoptb_snf_3"
	}
}

# 4. Initialize character flags
character_event = {
	id = snf.4
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
	clr_flag = snf_clergy_leadership_show
	set_flag = snf_clergy_leadership_hide
	clr_flag = snf_leadership_structure_show
	set_flag = snf_leadership_structure_hide
	clr_flag = snf_menu_clergy_show
	set_flag = snf_menu_clergy_hide
	clr_flag = snf_menu_leadership_show
	set_flag = snf_menu_leadership_hide
	clr_flag = snf_menu_society_show
	set_flag = snf_menu_society_hide
	clr_flag = snf_menu_other_faiths_show
	set_flag = snf_menu_other_faiths_hide
	clr_flag = snf_menu_war_peace_show
	set_flag = snf_menu_war_peace_hide
	clr_flag = snf_reputation_show
	set_flag = snf_reputation_hide
	clr_flag = snf_aggressiveness_show
	set_flag = snf_aggressiveness_hide
	clr_flag = snf_tactics_show
	set_flag = snf_tactics_hide
	clr_flag = snf_menu_love_marriage_show
	set_flag = snf_menu_love_marriage_hide
	clr_flag = snf_concubines_consorts_show
	set_flag = snf_concubines_consorts_hide
	clr_flag = snf_menu_incest_show
	set_flag = snf_menu_incest_hide
	clr_flag = snf_attributes_show
	set_flag = snf_attributes_hide
		set_flag = snf_menu_main
		set_flag = snf_character_initialized
	}
}
