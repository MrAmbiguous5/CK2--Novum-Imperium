targetted_decisions = {
	# Create tributary
	create_tributary = {
		filter = self
		third_party_filter = vassals
		ai_third_party_filter = vassals
		from_potential = { 
		}
		potential = { 
			real_tier = EMPEROR
			war = no
			is_nomadic = no
			is_tribal = no
		}
		third_party_potential = {
			FROMFROM = { 
				vassal_of = FROM 
				OR = {
					tier = COUNT
					tier = DUKE
					tier = KING
				}
				is_landed = yes
				war = no
				ai = yes
			}
		}
		third_party_allow = {
		}
		allow = {
			prestige = 500
		}
		effect = {
			prestige = -500
			FROMFROM = {  
				set_defacto_liege = THIS 
				set_character_flag = granted_autonomy
			}
			FROM = {
				make_tributary = {
					who = FROMFROM
					tributary_type = autonomous_tributary
				}
				character_event = { id = toe.1003 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.00015 #Once in twenty years, per 25 vassals
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = ambitious
						trait = greedy
						trait = proud
						has_character_modifier = imperial_inefficiency_0
						has_character_modifier = imperial_inefficiency_1
						has_character_modifier = imperial_inefficiency_2
						has_character_modifier = imperial_inefficiency_3
						has_character_modifier = imperial_inefficiency_4
					}
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					has_character_modifier = imperial_inefficiency_6
				}
			}
			modifier = {
				factor = 1.66
				FROM = {
					has_character_modifier = imperial_inefficiency_7
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_character_modifier = imperial_inefficiency_8
				}
			}
			modifier = {
				factor = 2.33
				FROM = {
					has_character_modifier = imperial_inefficiency_9
				}
			}
			modifier = {
				factor = 2.66
				FROM = {
					has_character_modifier = imperial_inefficiency_10
				}
			}
		}
		third_party_score = {
			factor = 100
			additive_modifier = {
				value = 10
				FROMFROM = { 
					NOT = { culture = FROM }
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = { 
					NOT = { culture_group = FROM }
				}
			}
			additive_modifier = {
				value = 10
				FROMFROM = { 
					NOT = { religion = FROM }
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = { 
					NOT = { religion_group = FROM }
				}
			}
			additive_modifier = {
				value = 10
				FROMFROM = {
					NOT = { num_of_count_titles_in_realm = 5 }
				}
			}
			additive_modifier = {
				value = 10
				FROMFROM = {
					NOT = { num_of_count_titles_in_realm = 10 }
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					num_of_count_titles_in_realm = 20
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					num_of_count_titles_in_realm = 30
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					num_of_count_titles_in_realm = 40
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					num_of_count_titles_in_realm = 50
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = {
					tier = COUNT
				}
			}
			additive_modifier = {
				value = -20
				FROMFROM = {
					tier = KING
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 0
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 1
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 2
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 3
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 4
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 5
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 6
					}
				}
			}
			additive_modifier = {
				value = -10
				FROMFROM = {
					capital_scope = {
						num_of_settlements == 7
					}
				}
			}
		}
	}
	
	create_tributary_target = {
		from_potential = { 
			real_tier = EMPEROR
			war = no
			is_nomadic = no
			is_tribal = no
			ai = no
		}
		potential = { #Redundant due to the from_potential
			vassal_of = FROM 
				OR = {
					tier = COUNT
					tier = DUKE
					tier = KING
				}
				is_landed = yes
				war = no
		}
		allow = {
			FROM = { prestige = 500 }
		}
		effect = {
			set_defacto_liege = THIS 
			set_character_flag = granted_autonomy
			FROM = {
				make_tributary = {
					who = ROOT
					tributary_type = autonomous_tributary
				}
				prestige = -500
				character_event = { id = toe.1003 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	#Absorb tributary
	absorb_autonomous = {
		filter = independent_rulers #Filter characters targeted by the player
		ai_target_filter = independent_rulers
		from_potential = {
			tier = EMPEROR
			is_nomadic = no
			is_tribal = no
		}
		potential = {
			is_tributary = {
				type = autonomous_tributary
				suzerain = FROM
			}
			NOT = { has_character_flag = granted_autonomy }
			ai = yes #Players won't get automatically absorbed, they need to request it
		}
		allow = {
			FROM = {
				prestige = 1000
				has_regent = no
			}
		}
		effect = {
			prestige = -1000
			set_defacto_liege = FROM
			character_event = { id = toe.1003 }
		}
		revoke_allowed = {
			always = no 
		}
		ai_will_do = {
			factor = 0.0015 #Once in ten years, per 5 tributaries
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						trait = ambitious
						trait = greedy
					}
					OR = {
						has_character_modifier = imperial_inefficiency_10
						has_character_modifier = imperial_inefficiency_9
						has_character_modifier = imperial_inefficiency_8
						has_character_modifier = imperial_inefficiency_7
						has_character_modifier = imperial_inefficiency_6
					}
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					has_character_modifier = imperial_inefficiency_4
				}
			}
			modifier = {
				factor = 1.66
				FROM = {
					has_character_modifier = imperial_inefficiency_3
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_character_modifier = imperial_inefficiency_2
				}
			}
			modifier = {
				factor = 2.33
				FROM = {
					has_character_modifier = imperial_inefficiency_1
				}
			}
			modifier = {
				factor = 2.66
				FROM = {
					has_character_modifier = imperial_inefficiency_0
				}
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 0.66
				trait = content
			}
			modifier = {
				factor = 0.73
				NOT = {
					capital_scope = {
						num_of_settlements == 1
					}
				}
			}
			modifier = {
				factor = 0.73
				NOT = {
					capital_scope = {
						num_of_settlements == 2
					}
				}
			}
			modifier = {
				factor = 0.73
				NOT = {
					capital_scope = {
						num_of_settlements == 3
					}
				}
			}
			modifier = {
				factor = 0.73
				NOT = {
					capital_scope = {
						num_of_settlements == 4
					}
				}
			}
			modifier = {
				factor = 1.27
				capital_scope = {
					num_of_settlements == 4
				}
			}
			modifier = {
				factor = 1.27
				capital_scope = {
					num_of_settlements == 5
				}
			}
			modifier = {
				factor = 1.27
				capital_scope = {
					num_of_settlements == 6
				}
			}
			modifier = {
				factor = 1.27
				capital_scope = {
					num_of_settlements == 7
				}
			}
		}
	}
	
	#Player asks to be freed
	
	player_become_autonomous = {
		filter = independent_rulers #Filter characters targeted by the player
		ai_target_filter = independent_rulers
		from_potential = {
			ai = no
		}
		potential = {
			tier = EMPEROR
			is_nomadic = no
			is_tribal = no
			is_liege_of = FROM
		}
		allow = {
			has_regent = no
		}
		effect = {
			FROM = { letter_event = { id = toe.1055 days = 5 random = 2 }}
		}
		revoke_allowed = {
			always = no 
		}
		ai_will_do = {
			factor = 0
		}
		ai_acceptance = {
			factor = 50
			yes_threshold = 50
			additive_modifier = {
				value = 50
				has_character_modifier = imperial_inefficiency_10
			}
			additive_modifier = {
				value = 40
				has_character_modifier = imperial_inefficiency_9
			}
			additive_modifier = {
				value = 30
				has_character_modifier = imperial_inefficiency_8
			}
			additive_modifier = {
				value = 20
				has_character_modifier = imperial_inefficiency_7
			}
			additive_modifier = {
				value = 10
				has_character_modifier = imperial_inefficiency_6
			}
			additive_modifier = {
				value = -10
				has_character_modifier = imperial_inefficiency_4
			}
			additive_modifier = {
				value = -20
				has_character_modifier = imperial_inefficiency_3
			}
			additive_modifier = {
				value = -30
				has_character_modifier = imperial_inefficiency_2
			}
			additive_modifier = {
				value = -40
				has_character_modifier = imperial_inefficiency_1
			}
			additive_modifier = {
				value = -50
				has_character_modifier = imperial_inefficiency_0
			}
			additive_modifier = {
				value = 50
				ROOT = { NOT = { culture = FROM }}
			}
			additive_modifier = {
				value = 20
				ROOT = { NOT = { culture_group = FROM }}
			}
			additive_modifier = {
				value = -20
				NOT = { ROOT = { culture_group = FROM }}
			}
			additive_modifier = {
				value = 20
				ROOT = { NOT = { religion = FROM }}
			}
			additive_modifier = {
				value = 50
				ROOT = { NOT = { religion_group = FROM }}
			}
			additive_modifier = {
				value = 20
				trait = content
			}
			additive_modifier = {
				value = 50
				trait = charitable
			}
			additive_modifier = {
				value = -20
				trait = ambitious
			}
			additive_modifier = {
				value = 40
				FROM = {
					capital_scope = {
						num_of_settlements == 0
					}
				}
			}
			additive_modifier = {
				value = -10
				FROM = {
					capital_scope = {
						num_of_settlements == 1
					}
				}
			}
			additive_modifier = {
				value = -20
				FROM = {
					capital_scope = {
						num_of_settlements == 2
					}
				}
			}
			additive_modifier = {
				value = -30
				FROM = {
					capital_scope = {
						num_of_settlements == 3
					}
				}
			}
			additive_modifier = {
				value = -40
				FROM = {
					capital_scope = {
						num_of_settlements == 4
					}
				}
			}
			additive_modifier = {
				value = -50
				FROM = {
					capital_scope = {
						num_of_settlements == 5
					}
				}
			}
			additive_modifier = {
				value = -60
				FROM = {
					capital_scope = {
						num_of_settlements == 6
					}
				}
			}
			additive_modifier = {
				value = -70
				FROM = {
					capital_scope = {
						num_of_settlements == 7
					}
				}
			}
		}
	}
	
	#Player asks to be absorbed
	
	player_absorb_autonomous = {
		filter = independent_rulers #Filter characters targeted by the player
		ai_target_filter = independent_rulers
		from_potential = {
			is_tributary = yes
			ai = no
		}
		potential = {
			tier = EMPEROR
			is_nomadic = no
			is_tribal = no
			FROM = {
				is_tributary = {
					type = autonomous_tributary
					suzerain = ROOT
				}
			}
		}
		allow = {
			has_regent = no
		}
		effect = {
			FROM = { letter_event = { id = toe.1056 days = 5 random = 2 }}
		}
		revoke_allowed = {
			always = no 
		}
		ai_will_do = {
			factor = 0
		}
		ai_acceptance = {
			factor = 50
			yes_threshold = 50
			additive_modifier = {
				value = 50
				has_character_modifier = imperial_inefficiency_0
			}
			additive_modifier = {
				value = 40
				has_character_modifier = imperial_inefficiency_1
			}
			additive_modifier = {
				value = 30
				has_character_modifier = imperial_inefficiency_2
			}
			additive_modifier = {
				value = 20
				has_character_modifier = imperial_inefficiency_3
			}
			additive_modifier = {
				value = 10
				has_character_modifier = imperial_inefficiency_4
			}
			additive_modifier = {
				value = -10
				has_character_modifier = imperial_inefficiency_6
			}
			additive_modifier = {
				value = -20
				has_character_modifier = imperial_inefficiency_7
			}
			additive_modifier = {
				value = -30
				has_character_modifier = imperial_inefficiency_8
			}
			additive_modifier = {
				value = -40
				has_character_modifier = imperial_inefficiency_9
			}
			additive_modifier = {
				value = -50
				has_character_modifier = imperial_inefficiency_10
			}
			additive_modifier = {
				value = 50
				ROOT = { culture = FROM }
			}
			additive_modifier = {
				value = 20
				ROOT = { culture_group = FROM }
			}
			additive_modifier = {
				value = -20
				NOT = { ROOT = { culture_group = FROM }}
			}
			additive_modifier = {
				value = 20
				ROOT = { religion = FROM }
			}
			additive_modifier = {
				value = -50
				NOT = { ROOT = { religion_group = FROM }}
			}
			additive_modifier = {
				value = 20
				trait = ambitious
			}
			additive_modifier = {
				value = 50
				trait = greedy
			}
			additive_modifier = {
				value = -20
				trait = content
			}
			additive_modifier = {
				value = -40
				FROM = {
					capital_scope = {
						num_of_settlements == 0
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 1
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 2
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 3
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 4
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 5
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 6
					}
				}
			}
			additive_modifier = {
				value = 10
				FROM = {
					capital_scope = {
						num_of_settlements == 7
					}
				}
			}
		}
	}
}